<html>

<head>
	<title>Code Generator</title>
	<link rel=StyleSheet href="./stylesheet.css" type="text/css" media=screen>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
</head>

<body onload="generateCodeOnload()">
	<script type="text/javascript">
		var textGlobal = "";
		var i = 0;
		var j = 0;
		var causeCount=0;
		var effectCount=0;
		var resetFlag="";
		function generateCodeOnload(resetFlag) {
			document.getElementById("causeDiv").style.display = "none";
			document.getElementById("effectDiv").style.display = "none";
			document.getElementById("previewAction").style.display = "none";
			document.getElementById("effects").value = "-1";
			document.getElementById("cause").value = "-1";
			document.getElementById("watchReg").value = "";
			document.getElementById("label").value = "";
			document.getElementsByName("targetAddr").value = "";
			document.getElementById("operation").value = "-1";
			document.getElementsByName("bitNumber").value = "";
			document.getElementsByName("targetEffectAddr").value = "";
			document.getElementById("operationEffect").value = "-1";
			document.getElementsByName("bitNumberEffect").value = "";
			document.getElementById("inputFileNameToSaveAs").value = "";
			document.getElementById("chiplet").value = "-1";
			document.getElementById("addrChoice").value = "-1";

			$(".bitNumber").hide();
			$(".bitNumCause").hide();
			$(".box1").hide();
			$(".box1Cause").hide();
			$(".box2").hide();
			$(".box2Cause").hide();

			$(".bitNumEffect").hide();
			$(".bitNumberEffect").hide();
			$(".box1Eff").hide();
			$(".box1effect").hide();
			$(".box2Eff").hide();
			$(".box2effect").hide(); 
			$(".dropdown-cause-bit-type").hide();
			$(".dropdown-effect-bit-type").hide();
			$(".dropdown-cause-literal-type").hide();
			$(".dropdown-effect-literal-type").hide();
			
			$('#operation').prop('selectedIndex',0);
			$('#operationEffect').prop('selectedIndex',0);
			
			$('.dropdown-parent-cause input[type="text"]').val('');
			$('.dropdown-parent-effect input[type="text"]').val('');

			// Removing newly added cause and effect rows
			if(resetFlag=="Y"){
				if(causeCount>0){
					for(k=2;k<=causeCount;k++){
						var divid='causeDiv'+k;
						$("#"+divid).remove();
					}
				}
				if(effectCount>0){
					for(p=2;p<=causeCount;p++){
						var divid='effectDiv'+p;
						$("#"+divid).remove();
					}
				}
			}
		}
		function showCauseDiv() {
			//alert("inside cause div onchange");
			if (document.getElementById("cause").value == 'yes') {
				document.getElementById("causeDiv").style.display = "block";
			}
			else if (document.getElementById("cause").value == 'no') {
				document.getElementById("causeDiv").style.display = "none";
			}
		}
		function showEffectDiv() {
			//alert("inside effect div onchange");
			if (document.getElementById("effects").value == 'yes') {
				document.getElementById("effectDiv").style.display = "block";
			}
			else if (document.getElementById("effects").value == 'no') {
				document.getElementById("effectDiv").style.display = "none";
			}
		}
		function previewAct() {
			var causeText="";
			var effectText="";
			var textToSave = document.getElementById("prevAction").value;		
			var label = document.getElementById("label").value;
			var cause = document.getElementById("cause").value;
			var effects = document.getElementById("effects").value;
			var chiplet = document.getElementById("chiplet").value;
			var addrChoice = document.getElementById("addrChoice").value;
			var watchReg = document.getElementById("watchReg").value;

			if(chiplet=='-1'){
				alert("Please select if you want to apply for Chiplet or not");
				return false;
			}else if(label==''){
				alert("Please provide label value");
				return false;
			}
			else if(addrChoice=='-1'){
				alert("Please select your choice of address");
				return false;
			}else if(watchReg==''){
				alert("Please provide watch register address");
				return false;
			}
			else if(cause=='-1' && effects=='-1'){
				alert("Please select cause or effect");
				return false;
			}

			if(addrChoice!='-1' && addrChoice=='logic'){
				watchReg="REG(" + watchReg + ")";
			}
			else if(addrChoice!='-1' && addrChoice=='reg'){
				if(chiplet!='-1' && chiplet=='yes'){
					watchReg="REG(MYCHIPLET," + watchReg + ")";
				}else if(chiplet!='-1' && chiplet=='no'){
					watchReg="REG(" + watchReg + ")";
				}
			}
			document.getElementById("previewAction").style.display = "block";
			// Get Cause Values
			var causeDiv_values = '';
				$('.dropdown-parent-cause').each(function() {
					//get values
					var addrType= $(this).find('#dataTypeCause').val();
					alert("addrType>>"+addrType);
					var text1 = $(this).find('.targetAddr').val();
					if(addrType=='logicCause'){
						alert("Inside logic cause>>");
						text1="REG(" + text1 + ")";
					}else if(addrType=='regCause'){
						alert("Inside reg cause>>");
						if(chiplet!='-1' && chiplet=='yes'){
							text1="REG(MYCHIPLET%" + text1 + ")";
						}else if(chiplet!='-1' && chiplet=='no'){
							text1="REG(" + text1 + ")";
						}
					}
					alert("text1>>"+text1);
					var text2 = $(this).find('#operation').val();
					if(text2=='AND' || text2=='OR'){
						var text3 = $(this).find('.bitNumber').val();
						causeDiv_values +='|'+ text1 +','+ text2 +','+ text3;
					}else if(text2=='EQUALTO'){
						alert("inside eq");
						var literalType=$(this).find('#literalTypeCause').val();
						alert("literalType>>"+literalType);
						if(literalType=='literalCause'){
							alert("inside literal cause");
							var noOfBits= $(this).find('#noOfBitsCause').val();
							alert("noOfBits>>"+noOfBits);
							var data=$(this).find('.box1').val();
							var mask=$(this).find('.box2').val();
							data="LITERAL("+noOfBits+"%"+data+")";
							if(mask==''){
								text2="["+text2+"%BUF]";
							}else{
								mask="LITERAL("+noOfBits+"%"+mask+")";
								text2="["+text2+"%BUF%MASK]";
							}
							alert("text2>>"+text2);
						}else{
							if(addrType=='logicCause'){
							  var data=$(this).find('.box1').val();
							  var mask=$(this).find('.box2').val();
							  data="REG("+data+")";
							  if(mask==''){
								text2="["+text2+"%BUF]";
							  }else{
								mask="REG("+mask+")";
								text2="["+text2+"%BUF%MASK]";
							  }
							}else if(addrType=='regCause'){
								var data=$(this).find('.box1').val();
							    var mask=$(this).find('.box2').val();
								if(chiplet!='-1' && chiplet=='yes'){
									data="REG("+data+")";
								}else if(chiplet!='-1' && chiplet=='no'){
									data="REG(MYCHIPLET%"+data+")";
									if(mask==''){
										text2="["+text2+"%BUF]";
									}else{
										mask="REG(MYCHIPLET%"+mask+")";
										text2="["+text2+"%BUF%MASK]";
									}
									if(mask==''){
										text2="["+text2+"%BUF]";
									}else{
										mask="REG("+mask+")";
										text2="["+text2+"%BUF%MASK]";
									}
								}
							}
						}
						causeDiv_values += '|'+ text1 +','+ text2 +','+ data+','+mask;
						alert(causeDiv_values);
					}
					else {
						var text3 = $(this).find('.box1').val();
						var text4 = $(this).find('.box2').val();
						causeDiv_values += '|'+ text1 +','+ text2 +','+ text3+','+text4;
					}
				});
			var count=(causeDiv_values.split("|").length - 1);
			var cause_arr;
			cause_arr=causeDiv_values.split("|");
			for(i=1;i<=count;i++){
				var cause_arr_val=cause_arr[i].split(",");
				var addr=cause_arr_val[0];
				addr=addr.replace(/%/g, ',');
				var operation=cause_arr_val[1];
				operation=operation.slice(1,-1);
				alert("operation:>>"+operation);
				operation=operation.replace(/%/g, ',');
				alert("operation>>"+operation);
				if(operation=='AND' || operation=='OR'){
					var bitNumber=cause_arr_val[2];
				}
				else{
					var box1=cause_arr_val[2];
					box1=box1.replace(/%/g, ',');
					var box2=cause_arr_val[3];
					box2=box2.replace(/%/g, ',');
				}
				if(causeText==""){
					if(operation=='AND' || operation=='OR'){
						causeText="CAUSE_EFFECT{\nWATCH=[" + watchReg + "] \nLABEL=[" + label + "] \nCAUSE: TARGET=[" + addr + "] OP=[" + operation + "] BIT=[" + bitNumber + "]";						
					}
					else if(operation.includes('EQUALTO')){
						if(operation.includes('MASK')){
							causeText="CAUSE_EFFECT{\nWATCH=[" + watchReg + "] \nLABEL=[" + label + "] \nCAUSE: TARGET=[" + addr + "] OP=[" + operation + "] DATA=[" + box1 + "] MASK=[" + box2 + "]";
						}else{
							causeText="CAUSE_EFFECT{\nWATCH=[" + watchReg + "] \nLABEL=[" + label + "] \nCAUSE: TARGET=[" + addr + "] OP=[" + operation + "] DATA=[" + box1 + "]";
						}
					}
					else{
						causeText="CAUSE_EFFECT{\nWATCH=[" + watchReg + "] \nLABEL=[" + label + "] \nCAUSE: TARGET=[" + addr + "] OP=[" + operation + "] DATA=[" + box1 + "] MASK=[" + box2 + "]";
					}
				}else{
					if(operation=='AND' || operation=='OR'){
						causeText=causeText+"\nCAUSE: TARGET=[" + addr + "] OP=[" + operation + "] BIT=[" + bitNumber + "]";
					}
					else if(operation.includes('EQUALTO')){
						if(operation.includes('MASK')){
							causeText=causeText+"\nCAUSE: TARGET=[" + addr + "] OP=[" + operation + "] DATA=[" + box1 + "] MASK=[" + box2 + "]";
						}else{
							causeText=causeText+"\nCAUSE: TARGET=[" + addr + "] OP=[" + operation + "] DATA=[" + box1 + "]";
						}
					}
					else{
						causeText=causeText+"\nCAUSE: TARGET=[" + addr + "] OP=[" + operation + "] DATA=[" + box1 + "] MASK=[" + box2 + "]";
					}					
				}
			}

			var effectDiv_values = '';
				$('.dropdown-parent-effect').each(function() {
						//get values
						var addrTypeEff= $(this).find('.dropdown-effect-data-type').val();
						var text1 = $(this).find('.targetEffectAddr').val();
						if(addrTypeEff=='logicEffect'){
							text1="REG(" + text1 + ")";
						}else if(addrTypeEff=='regEffect'){
							if(chiplet!='-1' && chiplet=='yes'){
								text1="REG(MYCHIPLET," + text1 + ")";
							}else if(chiplet!='-1' && chiplet=='no'){
								text1="REG(" + text1 + ")";
							}
						}

						var text2 = $(this).find('#operationEffect').val();
						if(text2=='AND' || text2=='OR'){
							var text3 = $(this).find('.bitNumberEffect').val();
							effectDiv_values += '|'+ text1 +','+ text2 +','+ text3;
						}else if(text2=='EQUALTO'){
							var literalTypeEff=$(this).find('.dropdown-effect-literal-type').val();
							if(literalTypeEff=='literalCause'){
								var noOfBitsEff= $(this).find('.dropdown-effect-bit-type').val();
								var data=$(this).find('.box1').val();
								var mask=$(this).find('.box2').val();
								data="LITERAL("+noOfBitsEff+","+data;
								if(mask==''){
									text2=text2+",BUF";
								}else{
									mask="LITERAL("+noOfBitsEff+","+mask;
									text2=text2+",BUF,MASK";
								}
							}else{
								if(addrType=='logicEffect'){
								var data=$(this).find('.box1').val();
								var mask=$(this).find('.box2').val();
								data="REG("+data+")";
								if(mask==''){
									text2=text2+",BUF";
								}else{
									mask="REG("+mask+")";
									text2=text2+",BUF,MASK";
								}
								}else if(addrType=='regEffect'){
									var data=$(this).find('.box1').val();
									var mask=$(this).find('.box2').val();
									if(chiplet!='-1' && chiplet=='yes'){
										data="REG("+data+")";
									}else if(chiplet!='-1' && chiplet=='no'){
										data="REG(MYCHIPLET,"+data+")";
										if(mask==''){
											text2=text2+",BUF";
										}else{
											mask="REG(MYCHIPLET,"+mask+")";
											text2=text2+",BUF,MASK";
										}
										if(mask==''){
											text2=text2+",BUF";
										}else{
											mask="REG("+mask+")";
											text2=text2+",BUF,MASK";
										}
									}
								}
							}
							effectDiv_values += '|'+ text1 +','+ text2 +','+ data+','+mask;
					}
						else{
							var text3 = $(this).find('.box1effect').val();
							var text4 = $(this).find('.box2effect').val();
							effectDiv_values += '|'+ text1 +','+ text2 +','+ text3+','+text4;
						}						
					});
				var count_eff=(effectDiv_values.split("|").length - 1);
				var effect_arr;
				effect_arr=effectDiv_values.split("|");
				for(i=1;i<=count_eff;i++){
					var effect_arr_val=effect_arr[i].split(",");
					var addrEff=effect_arr_val[0];
					var operationEff=effect_arr_val[1];
					if(operationEff=='AND' || operationEff=='OR'){
						var bitNumberEff=effect_arr_val[2];
					}else{
						var box1eff=effect_arr_val[2];
						var box2eff=effect_arr_val[3];
					}					
					if(effectText==""){
						if(operationEff=='AND' || operationEff=='OR'){
							effectText="\nEFFECT: TARGET=[" + addrEff + "] OP=[" + operationEff + "] BIT=[" + bitNumberEff + "]";
						}
						else if(operationEff.includes('EQUALTO')){
							if(operationEff.includes('MASK')){
								effectText="\nEFFECT: TARGET=[" + addrEff + "] OP=[" + operationEff + "] DATA=[" + box1eff + "] MASK=[" + box2eff + "]";
							}else{
								effectText="\nEFFECT: TARGET=[" + addrEff + "] OP=[" + operationEff + "] DATA=[" + box1eff + "]";
							}
					    }
						else{
							effectText="\nEFFECT: TARGET=[" + addrEff + "] OP=[" + operationEff + "] DATA=[" + box1eff + "] MASK=[" + box2eff + "]";
						}						
					}
					else{
						if(operationEff=='AND' || operationEff=='OR'){
							effectText=effectText+"\nEFFECT: TARGET=[" + addrEff + "] OP=[" + operationEff + "] BIT=[" + bitNumberEff + "]";
					}
					else if(operation.includes('EQUALTO')){
						if(operation.includes('MASK')){
							effectText=effectText+"\nEFFECT: TARGET=[" + addrEff + "] OP=[" + operationEff + "] DATA=[" + box1eff + "] MASK=[" + box2eff + "]";
						}else{
							effectText=effectText+"\nEFFECT: TARGET=[" + addrEff + "] OP=[" + operationEff + "] DATA=[" + box1eff + "]";
						}
					}
					else{
						 effectText=effectText+"\nEFFECT: TARGET=[" + addrEff + "] OP=[" + operationEff + "] DATA=[" + box1eff + "] MASK=[" + box2eff + "]";
					    }						
				    }
				}

			if (cause == 'yes' && effects == 'no'){
				causeText=causeText+"}";
				textToSave=causeText;
			}
			else if(cause == 'no' && effects == 'yes'){
				effectText="CAUSE_EFFECT{\nWATCH=[" + watchReg + "] \nLABEL=[" + label + "]"+effectText+"}";
				textToSave=effectText;
			}
			else if(cause == 'yes' && effects == 'yes'){
				effectText=effectText+"}";
				textToSave=causeText+effectText;
			}
			textGlobal=textToSave;
			document.getElementById("prevAction").value = textToSave;
		}
		function hidePreviewAct() {
			document.getElementById("previewAction").style.display = "none";
		}
		function replaceAll(str, find, replace) {
    		return str.replace(new RegExp(find, 'g'), replace);
		}

		function saveTextAsFile() {
			var chiplet = document.getElementById("chiplet").value;
			var addrChoice = document.getElementById("addrChoice").value;
			var watchReg = document.getElementById("watchReg").value;
			var label = document.getElementById("label").value;
			var cause = document.getElementById("cause").value;
			var effects = document.getElementById("effects").value;
			
			if(chiplet=='-1'){
				alert("Please select if you want to apply for Chiplet or not");
				return false;
			}else if(label==''){
				alert("Please provide label value");
				return false;
			}
			else if(addrChoice=='-1'){
				alert("Please select your choice of address");
				return false;
			}else if(watchReg==''){
				alert("Please provide watch register address");
				return false;
			}
			else if(cause=='-1' && effects=='-1'){
				alert("Please select cause or effect");
				return false;
			}
			var textToSave = textGlobal;			
			textToSave = textToSave.replace(/\n/g, "\r\n");
			var textToSaveAsBlob = new Blob([textToSave], { type: "text/plain" });
			var textToSaveAsURL = window.URL.createObjectURL(textToSaveAsBlob);
			var fileNameToSaveAs = document.getElementById("inputFileNameToSaveAs").value;

			var downloadLink = document.createElement("a");
			downloadLink.download = fileNameToSaveAs;
			downloadLink.innerHTML = "Download File";
			downloadLink.href = textToSaveAsURL;
			downloadLink.onclick = destroyClickedElement;
			downloadLink.style.display = "none";
			document.body.appendChild(downloadLink);
			downloadLink.click();
			textGlobal="";
		}
		function destroyClickedElement(event) {
			document.body.removeChild(event.target);
		}
		function resetAllFields() {
			var resetFlag="Y";
			generateCodeOnload(resetFlag);
			document.getElementById("prevAction").value='';
		}

		function addCause(that) {
			var lastCount = $(that).parent().parent().find('.dropdown-parent-cause').last().data().count;
			addDiv('causeDiv', `<div class="dropdown-cause-data-type" style="margin-left:-17px">Address type:<select id="dataTypeCause"><option value="-1">Select One</option><option value="regCause">Reg</option><option value="logicCause">Logic</option></select></div><label>Target Address</label><input type = "text" class ="targetAddr" style="margin-left:5px;width:90px" onblur="isValidhexTargetAddressCause(this)"/><div class="dropdown-cause-operation" style="margin-left:3px">Operation: <select id="operation" onchange="showProperTextBox(this)"><option value="-1">Select One</option><option value="AND">AND</option><option value="OR">OR</option><option value="EQUALTO">EQUALTO</option><option value="BIT_ON">BIT_ON</option><option value="ALLONES">ALLONES</option><option value="ALLZEROS">ALLZEROS</option></select></div><div class="dropdown-cause-literal-type" style="margin-left:-15px">Data Type:<select id="literalTypeCause"><option value="-1">Select One</option><option value="literalCause">Literal</option><option value="regCause">Reg</option></select></div><div class="dropdown-cause-bit-type" style="margin-left:-15px">No of BITS:<select id="noOfBitsCause"><option value="-1">Select One</option><option value="32">32</option><option value="64">64</option></select></div><label style="margin-left:2px" class="bitNumCause">BIT Number</label><input type = "text" class ="bitNumber" style="margin-left:6px;width:90px" onkeypress="return isNumber(event)"/><label style="margin-left:4px" class="box1Cause">Data</label><input type = "text" class ="box1" style="margin-left:4px;width:90px"/><label style="margin-left:17px" class="box2Cause">Mask</label><input type = "text" class ="box2" style="margin-left:5px;width:90px"/><input type="button" onclick="addCause(this)" value="+" style="margin-left:4px"/><input type="button" onclick="removeCause(this)" value="-" style="margin-left:6px"/>`, {
				'class': 'dropdown-parent-cause',
				'data-attr': 'attr',
				'data-count': lastCount+1,
				'id':'causeDiv'+(lastCount+1)
			});
			var divid='causeDiv'+(lastCount+1);
			$("#"+divid+" .bitNumber").hide();
			$("#"+divid+" .bitNumCause").hide();
			$("#"+divid+" .box1").hide();
			$("#"+divid+" .box1Cause").hide();
			$("#"+divid+" .box2").hide();
			$("#"+divid+" .box2Cause").hide();
			$("#"+divid+" .dropdown-cause-literal-type").hide();
			$("#"+divid+" .dropdown-cause-bit-type").hide();

			causeCount=lastCount+1;
		}
		function addEffect(that) {
			var lastCount = $(that).parent().parent().find('.dropdown-parent-effect').last().data().count;
			addDiv('effectDiv', `<div class="dropdown-effect-data-type" style="margin-left:-17px">Address type:<select id="dataTypeEffect"><option value="-1">Select One</option><option value="regEffect">Reg</option><option value="logicEffect">Logic</option></select></div><label>Target Address</label><input type = "text" class ="targetEffectAddr" style="margin-left:5px;width:90px" onblur="isValidhexTargetAddressEffect(this)"/><div class="dropdown-effect-operation" style="margin-left:3px">Operation: <select id="operationEffect" onchange="showProperTextBoxEffect(this)"><option value="-1">Select One</option><option value="AND">AND</option><option value="OR">OR</option><option value="EQUALTO">EQUALTO</option><option value="BIT_ON">BIT_ON</option><option value="ALLONES">ALLONES</option><option value="ALLZEROS">ALLZEROS</option></select></div><div class="dropdown-effect-literal-type" style="margin-left:-15px">Data Type:<select id="literalTypeEffect"><option value="-1">Select One</option><option value="literalEffect">Literal</option><option value="regEffect">Reg</option></select></div><div class="dropdown-effect-bit-type" style="margin-left:-15px">No of BITS:<select id="noOfBitsEffect"><option value="-1">Select One</option><option value="32">32</option><option value="64">64</option></select></div><label style="margin-left:2px" class="bitNumEffect">BIT Number</label><input type = "text" class ="bitNumberEffect" style="margin-left:6px;width:90px" onkeypress="return isNumber(event)"/><label style="margin-left:4px" class="box1Eff">Data</label><input type = "text" class ="box1effect" style="margin-left:4px;width:90px"/><label style="margin-left:17px" class="box2Eff">Mask</label><input type = "text" class ="box2effect" style="margin-left:5px;width:90px"/><input type="button" onclick="addEffect(this)" value="+" style="margin-left:4px"/><input type="button" onclick="removeEffect(this)" value="-" style="margin-left:6px"/>`, {
				'class': 'dropdown-parent-effect',
				'data-attr': 'attr',
				'data-count': lastCount+1,
				'id':'effectDiv'+(lastCount+1)
			});
			var divid='effectDiv'+(lastCount+1);
			$("#"+divid+" .bitNumEffect").hide();
			$("#"+divid+" .bitNumberEffect").hide();
			$("#"+divid+" .box1Eff").hide();
			$("#"+divid+" .box1effect").hide();
			$("#"+divid+" .box2Eff").hide();
			$("#"+divid+" .box2effect").hide();
			$("#"+divid+" .dropdown-effect-literal-type").hide();
			$("#"+divid+" .dropdown-effect-bit-type").hide();

			effectCount=lastCount+1;
		}
		function removeCause(that) {
			$(that).closest('.dropdown-parent-cause').remove();
		}
		function removeEffect(that) {
			$(that).closest('.dropdown-parent-effect').remove();
		}
		function addDiv(parent_div, content, attrs) {
			var div = document.createElement('div');
			var parent = document.getElementById(parent_div);

			for (var key in attrs) {
				if (attrs.hasOwnProperty(key)) {
					div.setAttribute(key, attrs[key]);
				}
			}
			div.innerHTML = content;
			if (parent) {
				parent.appendChild(div);
			}
		}

		function showProperTextBox(that){
			var divid=$(that).parents(':eq(1)').attr("id");
			var dd_val=$(that).val();
			if(dd_val=='AND'|| dd_val=='OR'){
				$("#"+divid+" .bitNumber").show();
				$("#"+divid+" .bitNumCause").show();
				$("#"+divid+" .box1").hide();
				$("#"+divid+" .box1Cause").hide();
				$("#"+divid+" .box2").hide();
				$("#"+divid+" .box2Cause").hide();
				$("#"+divid+" .dropdown-cause-bit-type").hide();
				$("#"+divid+" .dropdown-cause-literal-type").hide();
			}else if(dd_val!='AND' && dd_val!='OR' && dd_val!='-1'){
				$("#"+divid+" .bitNumber").hide();
				$("#"+divid+" .bitNumCause").hide();
				$("#"+divid+" .box1").show();
				$("#"+divid+" .box1Cause").show();
				$("#"+divid+" .box2").show();
				$("#"+divid+" .box2Cause").show();
				$("#"+divid+" .dropdown-cause-bit-type").show();
				$("#"+divid+" .dropdown-cause-literal-type").show();
			}else if(dd_val=='-1'){
				$("#"+divid+" .bitNumber").hide();
				$("#"+divid+" .bitNumCause").hide();
				$("#"+divid+" .box1").hide();
				$("#"+divid+" .box1Cause").hide();
				$("#"+divid+" .box2").hide();
				$("#"+divid+" .box2Cause").hide();
				$("#"+divid+" .dropdown-cause-bit-type").hide();
				$("#"+divid+" .dropdown-cause-literal-type").hide();
			}
		}
		function showProperTextBoxEffect(that){
			var divid=$(that).parents(':eq(1)').attr("id");
			var dd_val=$(that).val();

			if(dd_val=='AND'|| dd_val=='OR'){
				$("#"+divid+" .bitNumEffect").show();
				$("#"+divid+" .bitNumberEffect").show();
				$("#"+divid+" .box1Eff").hide();
				$("#"+divid+" .box1effect").hide();
				$("#"+divid+" .box2Eff").hide();
				$("#"+divid+" .box2effect").hide();				
				$("#"+divid+" .dropdown-effect-bit-type").hide();
				$("#"+divid+" .dropdown-effect-literal-type").hide();
			}else if(dd_val!='AND' && dd_val!='OR' && dd_val!='-1'){
				$("#"+divid+" .bitNumEffect").hide();
				$("#"+divid+" .bitNumberEffect").hide();
				$("#"+divid+" .box1Eff").show();
				$("#"+divid+" .box1effect").show();
				$("#"+divid+" .box2Eff").show();
				$("#"+divid+" .box2effect").show();
				$("#"+divid+" .dropdown-effect-bit-type").show();
				$("#"+divid+" .dropdown-effect-literal-type").show();
			}else if(dd_val=='-1'){
				$("#"+divid+" .bitNumEffect").hide();
				$("#"+divid+" .bitNumberEffect").hide();
				$("#"+divid+" .box1Eff").hide();
				$("#"+divid+" .box1effect").hide();
				$("#"+divid+" .box2Eff").hide();
				$("#"+divid+" .box2effect").hide();
				$("#"+divid+" .dropdown-effect-bit-type").hide();
				$("#"+divid+" .dropdown-effect-literal-type").hide();
			}
		}
		//To test Hex Values in Watch Reg
		function isValidhex(ele)
		{
			var regExp = new RegExp(/^0x[0-9A-F]{1,4}$/i);
			if (!regExp.test(ele.value)){
				alert("Please enter valid value in Watch Reg");
			}
		}
		//To test Hex Values in Target Address in Cause
		function isValidhexTargetAddressCause(ele)
		{
			var regExp = new RegExp(/^0x[0-9A-F]{1,4}$/i);
			if (!regExp.test(ele.value)){
				alert("Please enter valid value in Target Address in Cause");
			}
		}
		//To test Hex Values in Target Address in Effect
		function isValidhexTargetAddressEffect(ele)
		{
			var regExp = new RegExp(/^0x[0-9A-F]{1,4}$/i);
			if (!regExp.test(ele.value)){
				alert("Please enter valid value in Target Address in Effect");
			}
		}
		function isValidBinaryNumberCause(ele)
		{
			var regExp = new RegExp('^[0-9]{1,10}$');
			if (!regExp.test(ele.value)){
				alert("Please enter valid BIT Number in Cause");
			}
		}
		function isValidBinaryNumberEffect(ele)
		{
			var regExp = new RegExp('^[0-9]{1,10}$');
			if (!regExp.test(ele.value)){
				alert("Please enter valid BIT Number in Effect");
			}
		}
		function isNumber(evt) {
			evt = (evt) ? evt : window.event;
			var charCode = (evt.which) ? evt.which : evt.keyCode;
			if (charCode > 31 && (charCode < 48 || charCode > 57)) {
				return false;
			}
			return true;
		}

	</script>

	<div id="navigation">
		<center>
			<h1>Dynamic Code Generator</h1>
		</center>
		<div class="dropdown" style="margin-left:-15px">
			Do you want to select the Chiplets:
			<select id="chiplet">
				<option value="-1">Select One</option>
				<option value="yes">Yes</option>
				<option value="no">No</option>
			</select>
		</div>
		<div class="dropdown-parent">
			<label style="margin-left:1px">Label</label>
			<input type="text" id="label" />
		</div>
		<div class="dropdown-parent">
			<div class="dropdown" style="margin-left:-15px">
				How you want your address to be:
				<select id="addrChoice">
					<option value="-1">Select One</option>
					<option value="reg">Reg</option>
					<option value="logic">Logic</option>
				</select>
			</div>			
			<label>Watch Reg</label>
			<input type="text" id="watchReg" onblur="isValidhex(this)"/>
		</div>
		<div class="dropdown" style="margin-left:-15px">
			Do you want to select the Causes:
			<select id="cause" onchange="showCauseDiv()">
				<option value="-1">Select One</option>
				<option value="yes">Yes</option>
				<option value="no">No</option>
			</select>
		</div>
		<div id="causeDiv">
			<div class="dropdown-parent-cause" data-count=1 id="causeDiv">
				<div class="dropdown-cause-data-type" style="margin-left:-15px">
							Address type:
							<select id="dataTypeCause">
								<option value="-1">Select One</option>
								<option value="regCause">Reg</option>
								<option value="logicCause">Logic</option>
							</select>
				</div>
				<label>Target Address</label>
				<input type="text" class="targetAddr" style="width: 90px;" onblur="isValidhexTargetAddressCause(this)"/>
				<div class="dropdown-cause-operation">
					Operation:
					<select id="operation" onchange="showProperTextBox(this)">
						<option value="-1">Select One</option>
						<option value="AND">AND</option>
						<option value="OR">OR</option>
						<option value="EQUALTO">EQUALTO</option>
						<option value="BIT_ON">BIT_ON</option>
						<option value="ALLONES">ALLONES</option>
						<option value="ALLZEROS">ALLZEROS</option>
					</select>
				</div>
				<div class="dropdown-cause-literal-type" style="margin-left:-15px">
						Data Type:
						<select id="literalTypeCause">
							<option value="-1">Select One</option>
							<option value="literalCause">Literal</option>
							<option value="regCause">Reg</option>
						</select>
				</div>
				<div class="dropdown-cause-bit-type" style="margin-left:-15px">
						No of BITS:
						<select id="noOfBitsCause">
							<option value="-1">Select One</option>
							<option value="32">32</option>
							<option value="64">64</option>
					</select>
				</div>

				<label class="bitNumCause">BIT Number</label>
				<input type="text" class="bitNumber" onkeypress="return isNumber(event)"/>

				<label class="box1Cause">Data</label>
				<input type="text" style="width: 90px;" class="box1" />

				<label class="box2Cause" style="margin-left: 13px;">Mask</label>
				<input type="text"  style="width: 90px;" class="box2" />

				<input data-count="1" type="button" onclick="addCause(this)" value="+" />
			</div>
		</div>

		<div style="margin-left:1px">
			Do you want to select the Effects:
			<select id="effects" onchange="showEffectDiv()">
				<option value="-1">Select One</option>
				<option value="yes">Yes</option>
				<option value="no">No</option>
			</select>
		</div>
		<div id="effectDiv">
			<div class="dropdown-parent-effect" data-count=1 id="effectDiv">
				<div class="dropdown-effect-data-type" style="margin-left:-15px">
							Address type:
							<select id="dataTypeEffect">
								<option value="-1">Select One</option>
								<option value="regEffect">Reg</option>
								<option value="logicEffect">Logic</option>
					</select>
				</div>
				<label>Target Address</label>
				<input type="text" class="targetEffectAddr" style="width: 90px;" onblur="isValidhexTargetAddressEffect(this)"/>
				<div class="dropdown-effect-operation">
					Operation:
					<select id="operationEffect" onchange="showProperTextBoxEffect(this)">
						<option value="-1">Select One</option>
						<option value="AND">AND</option>
						<option value="OR">OR</option>
						<option value="EQUALTO">EQUALTO</option>
						<option value="BIT_ON">BIT_ON</option>
						<option value="ALLONES">ALLONES</option>
						<option value="ALLZEROS">ALLZEROS</option>
					</select>
				</div>
				<div class="dropdown-effect-literal-type" style="margin-left:-15px">
						Data Type:
						<select id="literalTypeEffect">
							<option value="-1">Select One</option>
							<option value="literalEffect">Literal</option>
							<option value="regEffect">Reg</option>
						</select>
				</div>
				<div class="dropdown-effect-bit-type" style="margin-left:-15px">
						No of BITS:
						<select id="noOfBitsEffect">
							<option value="-1">Select One</option>
							<option value="32">32</option>
							<option value="64">64</option>
					</select>
				</div>
				<label class="bitNumEffect">BIT Number</label>
				<input type="text" class="bitNumberEffect" style="width: 90px;" onkeypress="return isNumber(event)"/>
				
				<label class="box1Eff">Data</label>
				<input type="text" style="width: 90px;" class="box1effect" />

				<label class="box2Eff" style="margin-left: 13px;">Mask</label>
				<input type="text" style="width: 90px;" class="box2effect" />

				<input type="button" onclick="addEffect(this)" value="+" />
			</div>
		</div>

		<div id="previewAction">
			<textarea id="prevAction" rows="4" cols="50" readonly style="margin-left: 326px;margin-top: 29px;"></textarea>
		</div>
		<br>
		<br>
		<div>
			<tr class="dropdown-parent">
				<td>
					<button onclick="previewAct()" style="margin-left:390px">Preview Action</button>
				</td>
				<td>
					<button onclick="hidePreviewAct()">Hide Preview</button>
				</td>
			</tr>
			<br>
			<br>
		</div>
		<div style="margin-left:262px">
			<tr>
				<td>Filename to Save As:</td>
				<td>
					<input id="inputFileNameToSaveAs"></input>
				</td>
				<td>
					<button onclick="saveTextAsFile()">Generate Action File</button>
				</td>
			</tr>
		</div>
		<div style="margin-left:-89px">
			<br>
			<br>
			<button onclick="resetAllFields()" style="margin-left:534px">Reset</button>
		</div>
	</div>
</body>

</html>